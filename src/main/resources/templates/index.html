<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="zh">
<head>
    <meta charset="UTF-8"/>
    <title>Sap3And4</title>
    <!--<link th:href="@{../bootstrap/css/bootstrap.css}" rel="stylesheet" type="text/css"/>-->
    <style>
        .main {
            text-align: center;
        }
    </style>
</head>
<body>
<div class="main">
    <h3>导出数据</h3>
    <p style="color: red">点击'run'即可手动触发，按钮状态为'running'时请勿关闭或刷新网页</p>
    <button style="background: #2aabd2" id="button" onclick="run()">run</button>
</div>

<script th:src="@{../sap/js/jquery.min.js}" type="text/javascript"></script>
<!--<script th:src="@{../js/jquery.min.js}" type="text/javascript"></script>-->

<script>
    function run() {
        document.getElementById('button').disabled=true;
        document.getElementById("button").style.background="red";
        $("#button").text("running");
        alert("触发成功，程序正在运行，请点击'确定'继续");
        $.get("../sap/run", function (result) {
            // $.get("../run", function (result) {
            var msg=result.msg;
            if (result.code === 200) {
                $("#button").text("run");
                alert(msg);
                document.getElementById("button").style.background="#2aabd2";
                document.getElementById('button').disabled=false;
            } else {
                $("#button").text("run");
                alert(msg);
                document.getElementById("button").style.background="#2aabd2";
                document.getElementById('button').disabled=false;
            }
        }, "json");
    }
</script>

</body>
</html>
